<div class="container">
  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
  <div *ngIf="isLoading" class="loading-spinner">Loading...</div>

  <!-- Add Account Button -->
  <button (click)="toggleAddAccountForm()">Add Account</button>

  <!-- Add Account Form (conditional visibility) -->
  <div *ngIf="isAddAccountFormVisible">
    <form (ngSubmit)="addAccount()">
      <!-- Account Holder Name -->
      <div>
        <label for="accountHolderName">Account Holder Name</label>
        <input [(ngModel)]="newAccount.accountHolderName" name="accountHolderName" required placeholder="Account Holder Name" id="accountHolderName">
      </div>

      <!-- Account Number -->
      <div>
        <label for="accountNumber">Account Number</label>
        <input [(ngModel)]="newAccount.accountNumber" name="accountNumber" required placeholder="Account Number" id="accountNumber">
      </div>

      <!-- Account Type -->
      <div>
        <label for="accountType">Account Type</label>
        <input [(ngModel)]="newAccount.accountType" name="accountType" required placeholder="Account Type" id="accountType">
      </div>

      <!-- Balance -->
      <div>
        <label for="balance">Balance</label>
        <input [(ngModel)]="newAccount.balance" name="balance" required placeholder="Balance" id="balance">
      </div>

      <!-- Currency -->
      <div>
        <label for="currency">Currency</label>
        <input [(ngModel)]="newAccount.currency" name="currency" required placeholder="Currency" id="currency">
      </div>

      <!-- Initial Deposit -->
      <div>
        <label for="initialDeposit">Initial Deposit</label>
        <input [(ngModel)]="newAccount.initialDeposit" name="initialDeposit" required placeholder="Initial Deposit" id="initialDeposit">
      </div>

      <!-- Bank ID -->
      <div>
        <label for="bankId">Bank ID</label>
        <input [(ngModel)]="newAccount.bankId" name="bankId" required placeholder="Bank ID" id="bankId">
      </div>

      <!-- Account ID -->
      <div>
        <label for="accountId">Account ID</label>
        <input [(ngModel)]="newAccount.accountId" name="accountId" required placeholder="Account ID" id="accountId">
      </div>

      <button type="submit">Create Account</button>
    </form>
  </div>

  <!-- Sorting Buttons -->
  <div>
    <button (click)="toggleSort('accountHolderName')">Sort by Account Holder</button>
    <button (click)="toggleSort('accountNumber')">Sort by Account Number</button>
    <button (click)="toggleSort('balance')">Sort by Balance</button>
    <button (click)="toggleSort('createdAt')">Sort by Creation Date</button>
    <button (click)="toggleSort('accountId')">Sort by Account ID</button>
    <button (click)="toggleSort('serialNumber')">Sort by Serial Number</button>
  </div>

  <!-- Account List -->
  <table *ngIf="accounts.length > 0">
    <thead>
      <tr>
        <th>Account ID</th>
        <th>Serial Number</th>
        <th>Account Holder</th>
        <th>Account Number</th>
        <th>Account Type</th>
        <th>Balance</th>
        <th>Currency</th>
        <th>Created At</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let account of accounts">
        <td>{{ account.accountId }}</td>
        <td>{{ account.serialNumber }}</td>
        <td>{{ account.accountHolderName }}</td>
        <td>{{ account.accountNumber }}</td>
        <td>{{ account.accountType }}</td>
        <td>{{ account.balance }}</td>
        <td>{{ account.currency }}</td>
        <td>{{ account.createdAt }}</td>
        <td>
          <button (click)="viewAccountDetails(account.accountId)">View</button>
          <button (click)="toggleAccountSuspension(account.accountId)">
            {{ account.isSuspended ? 'Activate' : 'Suspend' }}
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Message when no accounts are available -->
  <div *ngIf="accounts.length === 0" class="no-accounts-message">No accounts found</div>
</div>
